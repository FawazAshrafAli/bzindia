
{% extends "admin_base/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Update Contact Us Page{% endblock title %}

{% block content %}

<!-- Page Content -->
<div class="content container-fluid">
	
	<!-- Page Header -->
	<div class="crms-title row bg-white mb-4">
		<div class="col  p-0">
			<h3 class="page-title">
			<span class="page-title-icon bg-gradient-primary text-white me-2">
				<i class="la la-columns"></i>
			</span> Update Contact Us Page </h3>
		</div>       
		<div class="col p-0 text-end">
			<ul class="breadcrumb bg-white float-end m-0 ps-0 pe-0">
				<li class="breadcrumb-item"><a href="index.html">Contact Us Page</a></li>
				<li class="breadcrumb-item active">Update Contact Us Page</li>
			</ul>
		</div>
	</div>
	<!-- /Page Header -->

    <div class="settings-menu-links">
        <ul class="nav nav-tabs menu-tabs">							
            <li class="nav-item {% if current_custom_page == "About Us" %}active{% endif %}">
                <a class="nav-link" href="{% url 'superadmin:about_us' %}">About Us</a>
            </li>
            <li class="nav-item {% if current_custom_page == "Contact Us" %}active{% endif %}">
                <a class="nav-link" href="{% url 'superadmin:contact_us' %}">Contact Us</a>
            </li>
            <li class="nav-item {% if current_custom_page == "FAQ" %}active{% endif %}">
                <a class="nav-link" href="{% url 'superadmin:faq' %}">FAQ</a>
            </li>
            <li class="nav-item {% if current_custom_page == "Privacy Policy" %}active{% endif %}">
                <a class="nav-link" href="{% url 'superadmin:privacy_policies' %}">Privacy Policy</a>
            </li>
            <li class="nav-item {% if current_custom_page == "Terms And Conditions" %}active{% endif %}">
                <a class="nav-link" href="{% url 'superadmin:terms_and_conditions' %}">Terms &amp; Conditions</a>
            </li>
            <li class="nav-item {% if current_custom_page == "Shipping And Delivery Policy" %}active{% endif %}">
                <a class="nav-link" href="{% url 'superadmin:shipping_and_delivery_policies' %}">Shipping &amp; Delivery Policy</a>
            </li>
            <li class="nav-item {% if current_custom_page == "Cancellation And Refund Policy" %}active{% endif %}">
                <a class="nav-link" href="{% url 'superadmin:cancellation_and_refund_policies' %}">Cancellation &amp; Refund Policy</a>
            </li>
        </ul>
    </div>
	
	<!-- Content Starts -->
    <div class="row">
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <div class="col-lg-12"> 
            <form method="post" action="{% url 'superadmin:update_contact_us' contact_us.slug %}" class="needs-validation" enctype="multipart/form-data" id="add-custom-page-form" novalidate>
                {% csrf_token %}
                {{ about_us_form.media }}
                
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title mb-0">Contact Us</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="email-input">Email <span class="text-danger">*</span></label>
                                <div class="input-group">
                                    <span class="input-group-text" id="inputGroupPrepend">@</span>
                                    <input type="email" class="form-control" id="email-input" name="email" placeholder="Email" aria-describedby="inputGroupPrepend" value="{{contact_us.email}}" required>
                                    <div class="invalid-feedback">
                                        Please enter a valid email address.
                                    </div>
                                    <div class="valid-feedback">
                                        Looks good!
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="web-input">Web</label>
                                <input type="url" class="form-control" id="web-input" name="web" placeholder="Web Address" aria-describedby="inputGroupPrepend" value="{{contact_us.web}}" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="tel-input">Tel <span class="text-danger">*</span></label>
                                <input type="tel" name="tel" id="tel-input" class="form-control" placeholder="Tel" value="{{contact_us.tel}}" required>
                                <span class="form-text text-muted">eg: 9876543210</span>
                                <div class="invalid-feedback">
                                    Please enter a valid contact number. It can include numbers, spaces, dashes, or start with + for international format.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mobile-input">Mobile <span class="text-danger">*</span></label>
                                <input type="mobile" name="mobile" id="mobile-input" class="form-control" placeholder="Mobile" value="{{contact_us.mobile}}" required>
                                <span class="form-text text-muted">eg: 9876543210</span>
                                <div class="invalid-feedback">
                                    Please enter a valid contact number. It can include numbers, spaces, dashes, or start with + for international format.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </div>                            
                        <br>
                        <div class="row">                                
                            <div class="col-md-12 mb-3">
                                <label for="address-input">Address <span class="text-danger">*</span></label>
                                <textarea class="form-control" name="address" id="address-input" placeholder="Address">{% if contact_us.address %}{{contact_us.address}}{% endif %}</textarea>
                            </div>
                        </div>
                        <div class="row">                                
                            <div class="col-md-6 mb-3">
                                <label for="page-type-dropdown">State <span class="text-danger">*</span></label>
                                <select class="form-control" id="state-dropdown" name="state" required>
                                    <option value="" hidden disabled selected>Select State</option>
                                    {% for state in states %}
                                    <option value="{{state.slug}}" {% if contact_us.state.slug == state.slug %}selected{% endif %}>{{state.name}}</option>
                                    {% endfor %}
                                </select>
                                <div class="invalid-feedback">
                                    Please provide a valid state.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="page-type-dropdown">District <span class="text-danger">*</span></label>
                                <select class="form-control" id="district-dropdown" name="district" required>
                                    <option value="" hidden disabled selected>Select District</option>                                        
                                    {% for district in districts %}
                                    <option value="{{district.slug}}" {% if contact_us.district.slug == district.slug %}selected{% endif %}>{{district.name}}</option>
                                    {% endfor %}
                                </select>
                                <div class="invalid-feedback">
                                    Please provide a valid state.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="place-dropdown">Place <span class="text-danger">*</span></label>
                                <select class="form-control" id="place-dropdown" name="place" required>
                                    <option value="" hidden disabled selected>Select Place</option>
                                    {% for place in places %}
                                    <option value="{{place.slug}}" {% if contact_us.place.slug == place.slug %}selected{% endif %}>{{place.name}}</option>
                                    {% endfor %}
                                </select>
                                <div class="invalid-feedback">
                                    Please provide a valid state.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="pincode-input">Pincode <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="pincode-input" placeholder="Pincode" name="pincode" value="{{contact_us.pincode}}" required>
                                <div class="invalid-feedback">
                                    Please enter a valid name containing only letters, spaces, hyphens, or apostrophes. Numbers and special characters are not allowed.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </div>
                        
                        <br>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="lat-input">Latitude <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="lat-input" placeholder="Latitude" name="lat" value="{{contact_us.lat}}" required>
                                <div class="invalid-feedback">
                                    Please enter a valid name containing only letters, spaces, hyphens, or apostrophes. Numbers and special characters are not allowed.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="lon-input">Longitude <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="lon-input" placeholder="Longitude" name="lon" value="{{contact_us.lon}}" required>
                                <div class="invalid-feedback">
                                    Please enter a valid name containing only letters, spaces, hyphens, or apostrophes. Numbers and special characters are not allowed.
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="form-row">
                            <div class="col-md-12 mb-3 d-flex justify-content-center">
                                <label for="provide-query-input">Provide Query Field&nbsp;</label>
                                <input type="checkbox" id="provide-query-input" name="provide_query" style="margin: 0; padding: 0;">
                            </div>
                        </div>
                    </div>                    
                </div>  
                <div class="text-center">
                    <button type="submit" class="btn btn-primary" id="submit-button">Submit</button>
                </div>              
            </form>

	<!-- /Content End -->
	
</div>
<!-- /Page Content -->
				
{% endblock content %}

{% block scripts %}
<script src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>
<script>

    $(document).ready(() => {        

        // Get Districts
        $(document).on('change', '#state-dropdown', function () {
            const state = $(this).val();

            $.ajax({
                type: 'GET',
                url: `{% url 'locations:get_districts' %}`,
                dataType: 'json',
                data: {"state": state},

                success: response => {
                    const districts = response.districts;

                    if (districts) {
                        $('#district-dropdown').html('<option value="" selected disabled hidden>Select District</option>');

                        districts.forEach(district => {
                            $('#district-dropdown').append(`<option value="${district.slug}">${district.name}</option>`);
                        });
                    }
                },

                error: error => console.error("Error: ", error),
            });
        });

        // Get Places
        $(document).on('change', '#district-dropdown', function () {
            const district = $(this).val();
            const state = $('#state-dropdown').val();

            $.ajax({
                type: 'GET',
                url: `{% url 'locations:get_places' %}`,
                dataType: 'json',
                data: {
                    "district": district,
                    "state": state
                },

                success: response => {
                    const places = response.places;

                    if (places) {
                        $('#place-dropdown').html('<option value="" selected disabled hidden>Select Place</option>');

                        places.forEach(place => {
                            $('#place-dropdown').append(`<option value="${place.slug}">${place.name}</option>`);
                        });
                    }
                },

                error: error => console.error("Error: ", error),
            });
        });
                
    })
</script>
{% endblock scripts %}